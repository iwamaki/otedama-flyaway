# ワールド1: チュートリアル

## 概要
```
目的: お手玉の基本操作を習得する
構成: 3ステージ
難易度: 緩〜急（超急は1-2終盤から）

学習目標:
├─ 1-1: 単発ジャンプと方向制御
├─ 1-2: 二段発射（空中スワイプ）
└─ 1-3: 横距離ジャンプ

地形素材: wood（木）
```

## 座標表記ルール
```
★JSON直結形式:
├─ x範囲, y範囲: verticesに直接使える座標
├─ オフセット(x,y)は常に 0,0 を推奨
├─ y座標: 小=上、大=下（y=-20は上、y=40は下）
└─ 壁接続: x端が±25に接するか

例: T0(スポーン) x=10〜25, y=38〜42
↓ そのままverticesへ
"vertices": [
  {"x": 10, "y": 38},
  {"x": 25, "y": 38},
  {"x": 25, "y": 42},
  {"x": 10, "y": 42}
]
```

## 吹き抜け構造
```
ワールド1は縦につながった「吹き抜けの塔」:
├─ 各ステージに床はない（最下層の1-1のみ）
├─ 落下したら遷移ゾーンを通過して下のステージへ
├─ 最悪の場合、1-1の床まで落ちる
└─ 遷移ゾーンは壁から壁まで（横幅いっぱい）

    ┌─────────────────────────────────────────────┐
    │              ステージ1-3                     │
    │         足場...                             │
    │=============================================│ zone（壁から壁）
    ─────────────────────────────────────────────────
    │=============================================│ zone（壁から壁）
    │              ステージ1-2                     │
    │         足場...                             │
    │=============================================│ zone（壁から壁）
    ─────────────────────────────────────────────────
    │=============================================│ zone（壁から壁）
    │              ステージ1-1                     │
    │         足場...                             │
    │=============================================│ 床（唯一の安全ネット）
    └─────────────────────────────────────────────┘

スリル:
├─ 1-3で失敗 → 遷移ゾーン通過 → 1-2に落下
├─ 1-2で失敗 → 遷移ゾーン通過 → 1-1に落下
└─ 1-1で失敗 → 床でキャッチ（最下層）
```

## ★遷移前後の足場配置
```
遷移時に相対座標（x位置）が保持されるため、
遷移前後の足場は物理的につながっていると考えて設計する。

【ワールド1の実際の配置】
├─ 1-1 最上部: x=-5.5〜6.5（中心≒0）
├─ 1-2 スポーン: x=10〜25（右壁接続）
├─ 1-2 最上部: x=-11〜1（中心=-5）
└─ 1-3 スポーン: x=-25〜-10（左壁接続）

【ステージ間の連続性】
    1-3: スポーン x=-25〜-10 (左壁接続)
            ↖
    ════════════════════════════════  zone_1_2_top / zone_1_3_bottom
    1-2: 最上部 x=-11〜1 (中心=-5)
            ...
    1-2: スポーン x=10〜25 (右壁接続)
            ↗
    ════════════════════════════════  zone_1_1_top / zone_1_2_bottom
    1-1: 最上部 x=-5.5〜6.5 (中心≒0)
```

## 記号凡例
```
T  : Terrain（広い・安心）- 休憩ポイント、スポーン地点
P  : Platform（細い・緊張）- スキル要求、挑戦ポイント

壁接続パターン:
├─ x=-25に接する : 左壁に接続
├─ x=+25に接する : 右壁に接続
├─ 両方に接する  : 両壁に接続（床のみ）
└─ どちらにも接しない : 浮き

terrainType: wood（ステージ1共通）
プレイエリア: 50マス幅（-25〜+25）
壁: 各15マス厚（-40〜-25, +25〜+40）

★視界制約（重要）:
├─ 横方向: ±10マス
├─ 上方向: 20マス
└─ 下方向: 15マス
→ ジャンプ先は必ず視界内に！
```

---

## ステージ1-1「目覚め」

### コンセプト
```
目的: 単発ジャンプの力加減と方向制御を学ぶ
制約: 二段発射なしでクリア可能（最大12m）
特徴:
├─ 緩やかなジグザグで方向制御を練習
├─ 終盤に分岐選択（P6 or P7）
├─ スポーン地点は広くて安心（右壁接続）
└─ 最上部から右斜めジャンプで1-2へ遷移
```

### オブジェクト一覧（実座標）
```
┌────┬──────────────┬─────────────┬─────────────┬────────┬────────────┐
│ No │ 名称         │ x範囲       │ y範囲       │ サイズ │ 備考       │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│  1 │ 左壁(rock)   │ -40 〜 -25  │ -25 〜 60   │ 15×85  │ -          │
│  2 │ 右壁(rock)   │  25 〜  40  │ -25 〜 60   │ 15×85  │ -          │
│  3 │ 床(wood)     │ -25 〜  25  │  50 〜 54   │ 50×4   │ 両壁接続   │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│  4 │ T0/スポーン  │  10 〜  25  │  38 〜 42   │ 15×4   │ 右壁接続   │
│  5 │ P1           │  -3 〜   3  │  31 〜 32   │  6×1   │ 浮き・中央 │
│  6 │ P2           │   4 〜  10  │  22 〜 23   │  6×1   │ 浮き・右寄り│
│  7 │ P3           │ -25 〜  -5  │  15 〜 16   │ 20×1   │ 左壁接続   │
│  8 │ T4           │  -7 〜   7  │   4 〜  8   │ 14×4   │ 浮き・中央 │
│  9 │ P6           │ -12 〜  -6  │  -4 〜 -3   │  6×1   │ 浮き・左側 │
│ 10 │ P7           │   7 〜  13  │  -4 〜 -3   │  6×1   │ 浮き・右側 │
│ 11 │ 最上部       │  -6 〜   6  │ -14 〜 -10  │ 12×4   │ 浮き・中央 │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│ 12 │ zone_1_1_top │ -25 〜  25  │ -25 〜 -20  │ 50×5   │ 壁から壁   │
└────┴──────────────┴─────────────┴─────────────┴────────┴────────────┘

スポーン: x=10, y=36
```

### ASCII設計図（実座標ベース）
```
     x: -40  -25      -10     0    +10      +25  +40
        |####|                              |####|
   -25  |####|========[遷移ゾーン]==========|####|  zone y=-25〜-20
        |####|                              |####|
   -14  |####|           [==最上部==]       |####|  y=-14〜-10, x=-6〜6
        |####|                ↑             |####|
        |####|                |10m          |####|
    -4  |####|     [P6]            [P7]     |####|  y=-4〜-3
        |####|   x=-12〜-6       x=7〜13    |####|  並列！どちらからでもOK
        |####|        ↖        ↗            |####|
     4  |####|           [==T4==]           |####|  y=4〜8, x=-7〜7
        |####|              ↑               |####|
        |####|              |11m            |####|
    15  |####==[====P3====]                 |####|  y=15〜16, x=-25〜-5
        |####|            ↗                 |####|
        |####|        斜め9m                |####|
    22  |####|              [P2]            |####|  y=22〜23, x=4〜10
        |####|               ↑              |####|
        |####|               |9m            |####|
    31  |####|          [P1]                |####|  y=31〜32, x=-3〜3
        |####|            ↑                 |####|
        |####|            |6m               |####|
    38  |####|              [===T0/スポーン===]####|  y=38〜42, x=10〜25
        |####|                  S           |####|  spawn(10,36)
        |####|                              |####|
    50  |####|================床=============|####|  y=50〜54
        └────┴──────────────────────────────┴────┘
```

### ジャンプシーケンス
```
[床]         y=50  ─┐ 安全ネット
    ↑6m           │
[T0]  y=38  x=10〜25  ─┤ スポーン（右壁接続）
    ↑6m           │
[P1]  y=31  x=-3〜3   ─┤ 左へ移動
    ↑9m           │
[P2]  y=22  x=4〜10   ─┤ 右寄り
    ↑7m 斜め      │
[P3]  y=15  x=-25〜-5 ─┤ 左壁接続（大きめ）
    ↑11m          │
[T4]  y=4   x=-7〜7   ─┤ 休憩ポイント
    ↑8m           │
[P6/P7] y=-4        ─┤ 分岐選択！
    ↑10m          │
[最上部] y=-14 x=-6〜6 ─┤ → 右斜めで1-2へ
    ↑             │
[zone] y=-25〜-20   ─┴─ 遷移

★視界チェック（横距離）:
├─ T0(中心17.5) → P1(中心0): 17.5マス → やや遠いが大丈夫
├─ P1(中心0) → P2(中心7): 7マス ✓
├─ P2(中心7) → P3(中心-15): 22マス → 壁接続で視認可能
├─ P3(中心-15) → T4(中心0): 15マス → 壁から見える
├─ T4(中心0) → P6/P7(中心-9/10): 9〜10マス ✓
└─ P6/P7 → 最上部(中心0): 9〜10マス ✓
```

### JSON vertices例
```json
// T0(スポーン足場) - 右壁接続
{
  "type": "terrain",
  "x": 0, "y": 0,
  "vertices": [
    {"x": 10, "y": 38},
    {"x": 25, "y": 38},
    {"x": 25, "y": 42},
    {"x": 10, "y": 42}
  ],
  "isLoop": true,
  "terrainType": "wood"
}

// P1 - 浮き
{
  "type": "terrain",
  "x": 0, "y": 0,
  "vertices": [
    {"x": -3, "y": 31},
    {"x": 3, "y": 31},
    {"x": 3, "y": 32},
    {"x": -3, "y": 32}
  ],
  "isLoop": true,
  "terrainType": "wood"
}
```

### 遷移ゾーン設定
```json
{
  "type": "transitionZone",
  "x": 0,
  "y": -22.5,
  "width": 50,
  "height": 5,
  "nextStage": "assets/stages/stage1-2.json",
  "id": "zone_1_1_top",
  "targetZoneId": "zone_1_2_bottom",
  "isLine": true
}
```

---

## ステージ1-2「飛翔」

### コンセプト
```
目的: 二段発射（空中スワイプ）を習得する
新要素: 16m以上のジャンプ（二段必須）
前提: 1-1で単発ジャンプをマスター済み
特徴:
├─ 序盤は単発で復習
├─ 中盤で急ジャンプの緊張感
├─ 終盤で二段発射を学ぶ（P4→T5が16m）
├─ スポーンはx=10〜25（右壁接続）← 1-1から右斜めで来る
└─ 最上部から左斜めジャンプで1-3へ遷移
```

### オブジェクト一覧（実座標）
```
┌────┬──────────────┬─────────────┬─────────────┬────────┬────────────┐
│ No │ 名称         │ x範囲       │ y範囲       │ サイズ │ 備考       │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│  1 │ 左壁(rock)   │ -40 〜 -25  │ -32 〜 60   │ 15×92  │ -          │
│  2 │ 右壁(rock)   │  25 〜  40  │ -32 〜 60   │ 15×92  │ -          │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│  3 │ T0/スポーン  │  10 〜  25  │  50 〜 54   │ 15×4   │ 右壁接続   │
│  4 │ P1           │  -3 〜   3  │  40 〜 41   │  6×1   │ 浮き・中央 │
│  5 │ P2           │ -13 〜  -7  │  30 〜 31   │  6×1   │ 浮き・左寄り│
│  6 │ T3           │  -6 〜   4  │  17 〜 21   │ 10×4   │ 浮き・中央 │
│  7 │ P4           │   5 〜  25  │   8 〜  9   │ 20×1   │ 右壁接続   │
│  8 │ T5           │ -25 〜  -3  │  -8 〜 -4   │ 22×4   │ 左壁接続   │
│  9 │ 最上部       │ -11 〜   1  │ -20 〜 -16  │ 12×4   │ 浮き・左寄り│
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│ 10 │ zone_bottom  │ -25 〜  25  │  52 〜 57   │ 50×5   │ y中心=54   │
│ 11 │ zone_top     │ -25 〜  25  │ -31 〜 -26  │ 50×5   │ y中心=-28.5│
└────┴──────────────┴─────────────┴─────────────┴────────┴────────────┘

スポーン: x=10, y=42
```

### ASCII設計図（実座標ベース）
```
     x: -40  -25      -10     0    +10      +25  +40
        |####|                              |####|
   -31  |####|========[遷移ゾーン]==========|####|  zone y=-31〜-26
        |####|      ↖                       |####|  左斜めジャンプで遷移！
   -20  |####|  [==最上部==]                |####|  y=-20〜-16, x=-11〜1
        |####|        ↑                     |####|
        |####|        |12m                  |####|
    -8  |####==[=====T5=====]               |####|  y=-8〜-4, x=-25〜-3
        |####|        ↑                     |####|  左壁接続・休憩
        |####|        |16m 二段★           |####|
     8  |####|              [=====P4=====]===####|  y=8〜9, x=5〜25
        |####|                   ↑          |####|  右壁接続
        |####|                   |9m        |####|
    17  |####|         [==T3==]             |####|  y=17〜21, x=-6〜4
        |####|            ↗                 |####|  休憩ポイント
        |####|       斜め13m                |####|
    30  |####|    [P2]                      |####|  y=30〜31, x=-13〜-7
        |####|      ↑                       |####|
        |####|      |9m                     |####|
    40  |####|         [P1]                 |####|  y=40〜41, x=-3〜3
        |####|           ↑                  |####|
        |####|           |8m                |####|
    50  |####|              [===T0/スポーン===]####|  y=50〜54, x=10〜25
        |####|                  S           |####|  spawn(10,42)
        |####|                              |####|
    54  |####|========[遷移ゾーン]==========|####|  ← 1-1から/1-1へ
        └────┴──────────────────────────────┴────┘
                    ↓ 床なし、落下で1-1へ
```

### ジャンプシーケンス
```
[zone_bottom] y=54  ─┐ 1-1からの入口
                   │
[T0]  y=50  x=10〜25  ─┤ スポーン（右壁接続）
    ↑8m            │
[P1]  y=40  x=-3〜3   ─┤ 左へ移動
    ↑9m            │
[P2]  y=30  x=-13〜-7 ─┤ さらに左
    ↑13m 斜め      │
[T3]  y=17  x=-6〜4   ─┤ 休憩ポイント（右斜め）
    ↑9m            │
[P4]  y=8   x=5〜25   ─┤ 右壁接続
    ↑16m 二段★    │ ← 二段発射を学ぶ！
[T5]  y=-8  x=-25〜-3 ─┤ 左壁接続・休憩
    ↑12m           │
[最上部] y=-20 x=-11〜1─┤ → 左斜めで1-3へ
    ↑              │
[zone_top] y=-28.5  ─┴─ 遷移

★二段発射ポイント:
P4(y=8) → T5(y=-8) = 16マス（単発14m超え）
```

### 遷移ゾーン設定
```json
// 下部（1-1への戻り口）
{
  "type": "transitionZone",
  "x": 0,
  "y": 54,
  "width": 50,
  "height": 5,
  "nextStage": "assets/stages/stage1-1.json",
  "id": "zone_1_2_bottom",
  "targetZoneId": "zone_1_1_top",
  "isLine": true
}

// 上部（1-3への出口）
{
  "type": "transitionZone",
  "x": 0,
  "y": -28.5,
  "width": 50,
  "height": 5,
  "nextStage": "assets/stages/stage1-3.json",
  "id": "zone_1_2_top",
  "targetZoneId": "zone_1_3_bottom",
  "isLine": true
}
```

---

## ステージ1-3「跳躍」

### コンセプト
```
目的: 横方向への距離ジャンプを習得
新要素: 横に飛ぶ（視界内で最大限の横移動）
前提: 二段発射をマスター済み
特徴:
├─ 序盤は縦移動で復習
├─ 中盤で横ジャンプを導入（横10マス以上）
├─ 終盤は斜め移動の応用
├─ スポーンはx=-25〜-10（左壁接続）← 1-2から左斜めで来る
└─ 最上部からワールド2へ遷移
```

### オブジェクト一覧（実座標）
```
┌────┬──────────────┬─────────────┬─────────────┬────────┬────────────┐
│ No │ 名称         │ x範囲       │ y範囲       │ サイズ │ 備考       │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│  1 │ 左壁(rock)   │ -40 〜 -25  │ -28 〜 56   │ 15×84  │ -          │
│  2 │ 右壁(rock)   │  25 〜  40  │ -28 〜 56   │ 15×84  │ -          │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│  3 │ T0/スポーン  │ -25 〜 -10  │  40 〜 44   │ 15×4   │ 左壁接続   │
│  4 │ P1           │  -3 〜   3  │  32 〜 33   │  6×1   │ 浮き・中央 │
│  5 │ P2           │  -9 〜  -3  │  24 〜 25   │  6×1   │ 浮き・左寄り│
│  6 │ T3           │  10 〜  25  │  12 〜 16   │ 15×4   │ 右壁接続   │
│  7 │ P4           │  -5 〜   1  │   4 〜  5   │  6×1   │ 浮き・左寄り│
│  8 │ P5           │  10 〜  16  │  -6 〜 -5   │  6×1   │ 浮き・右寄り│
│  9 │ 最上部       │  -6 〜   6  │ -16 〜 -12  │ 12×4   │ 浮き・中央 │
├────┼──────────────┼─────────────┼─────────────┼────────┼────────────┤
│ 10 │ zone_bottom  │ -25 〜  25  │  43 〜 46   │ 50×3   │ y中心=44   │
│ 11 │ zone_top     │ -25 〜  25  │ -28 〜 -23  │ 50×5   │ y中心=-25.5│
└────┴──────────────┴─────────────┴─────────────┴────────┴────────────┘

スポーン: x=-10, y=38
```

### ASCII設計図（実座標ベース）
```
     x: -40  -25      -10     0    +10      +25  +40
        |####|                              |####|
   -28  |####|========[遷移ゾーン]==========|####|  zone y=-28〜-23
        |####|                              |####|
   -16  |####|          [==最上部==]        |####|  y=-16〜-12, x=-6〜6
        |####|               ↖              |####|
        |####|          斜め10m             |####|
    -6  |####|                     [P5]     |####|  y=-6〜-5, x=10〜16
        |####|                      ↑       |####|
        |####|                      |9m     |####|
     4  |####|       [P4]                   |####|  y=4〜5, x=-5〜1
        |####|         ↖                    |####|
        |####|     斜め12m                  |####|
    12  |####|                  [===T3===]===####|  y=12〜16, x=10〜25
        |####|                       ↗      |####|  右壁接続・休憩
        |####|              横12m ★導入     |####|
    24  |####|      [P2]                    |####|  y=24〜25, x=-9〜-3
        |####|        ↑                     |####|
        |####|        |8m                   |####|
    32  |####|         [P1]                 |####|  y=32〜33, x=-3〜3
        |####|           ↑                  |####|
        |####|           |7m                |####|
    40  |####==[===T0/スポーン===]          |####|  y=40〜44, x=-25〜-10
        |####|       S                      |####|  spawn(-10,38)
        |####|                              |####|
    44  |####|========[遷移ゾーン]==========|####|  ← 1-2から/1-2へ
        └────┴──────────────────────────────┴────┘
                    ↓ 床なし、落下で1-2へ
```

### ジャンプシーケンス
```
[zone_bottom] y=44  ─┐ 1-2からの入口
                   │
[T0]  y=40  x=-25〜-10 ─┤ スポーン（左壁接続）
    ↑7m            │
[P1]  y=32  x=-3〜3   ─┤ 右へ移動
    ↑8m            │
[P2]  y=24  x=-9〜-3  ─┤ やや左
    ↑12m 横★      │ ← 横ジャンプを学ぶ！
[T3]  y=12  x=10〜25  ─┤ 右壁接続・休憩
    ↑8m 斜め       │
[P4]  y=4   x=-5〜1   ─┤ 左斜め
    ↑9m            │
[P5]  y=-6  x=10〜16  ─┤ 右寄り
    ↑10m 斜め      │
[最上部] y=-16 x=-6〜6 ─┤ → ワールド2へ
    ↑              │
[zone_top] y=-25.5  ─┴─ 遷移

★横ジャンプポイント:
P2(中心-6) → T3(中心17.5) = 横23マス
→ T3は大きい足場なので視界端でも見える
```

### 遷移ゾーン設定
```json
// 下部（1-2への戻り口）
{
  "type": "transitionZone",
  "x": 0,
  "y": 44,
  "width": 50,
  "height": 3,
  "nextStage": "assets/stages/stage1-2.json",
  "id": "zone_1_3_bottom",
  "targetZoneId": "zone_1_2_top",
  "isLine": true
}

// 上部（ワールド2への出口）
{
  "type": "transitionZone",
  "x": 0,
  "y": -25.5,
  "width": 50,
  "height": 5,
  "nextStage": "assets/stages/stage2-1.json",
  "id": "zone_1_3_top",
  "targetZoneId": "zone_2_1_bottom",
  "isLine": true
}
```

---

## ワールド1 遷移ゾーン一覧

```
┌──────────────────────┬─────────────────────┬────────────────────┐
│ ID                   │ 場所                │ 遷移先             │
├──────────────────────┼─────────────────────┼────────────────────┤
│ zone_1_1_top         │ 1-1 上端 y=-22.5    │ 1-2 (bottom)       │
│ zone_1_2_bottom      │ 1-2 下端 y=54       │ 1-1 (top)          │
│ zone_1_2_top         │ 1-2 上端 y=-28.5    │ 1-3 (bottom)       │
│ zone_1_3_bottom      │ 1-3 下端 y=44       │ 1-2 (top)          │
│ zone_1_3_top         │ 1-3 上端 y=-25.5    │ 2-1 (bottom)       │
└──────────────────────┴─────────────────────┴────────────────────┘

すべて壁から壁まで（幅50マス、x=-25〜25）

落下時の流れ: 1-3 → zone → 1-2 → zone → 1-1 → 床
上昇時の流れ: 1-1 → zone → 1-2 → zone → 1-3 → zone → 2-1
```

---

## ワールド1 まとめ

### 学習進行
```
1-1 「目覚め」
├─ 単発ジャンプの力加減
├─ 緩やかな方向制御
├─ 分岐選択の導入（P6 or P7）
└─ 遷移: 右斜めジャンプで1-2へ
     ↓
1-2 「飛翔」
├─ 単発の復習
├─ 急ジャンプで緊張感
├─ 二段発射（空中スワイプ）の習得（P4→T5: 16m）
└─ 遷移: 左斜めジャンプで1-3へ
     ↓
1-3 「跳躍」
├─ 縦移動の復習
├─ 横ジャンプの導入（P2→T3）
├─ 斜め移動の応用
└─ 遷移: ワールド2へ
     ↓
ワールド2へ（すべての技術を使いこなす）
```

### 壁接続の使い分け
```
両壁接続:
└─ 床のみ（1-1最下層の安全ネット）

片壁接続:
├─ スポーン足場: 遷移方向に合わせて左右を選択
│   └─ 1-1: 右壁接続（次は右斜めジャンプ）
│   └─ 1-2: 右壁接続（1-1から右斜めで着地）
│   └─ 1-3: 左壁接続（1-2から左斜めで着地）
├─ 中継足場: 壁際で救済（端に落ちてもキャッチ）
└─ T3, T5など: 休憩ポイント

浮き:
├─ 緊張感を演出
├─ 精度の高いジャンプを要求
└─ P1〜P7など中間足場
```

### JSON変換のポイント
```
1. オフセット(x,y)は常に 0,0 を使う
2. verticesに実座標を直接記載
3. 矩形の場合: 左上→右上→右下→左下 の順

例: x=10〜25, y=38〜42 の足場
{
  "type": "terrain",
  "x": 0, "y": 0,
  "vertices": [
    {"x": 10, "y": 38},  // 左上
    {"x": 25, "y": 38},  // 右上
    {"x": 25, "y": 42},  // 右下
    {"x": 10, "y": 42}   // 左下
  ],
  "isLoop": true,
  "terrainType": "wood"
}
```
